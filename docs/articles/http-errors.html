<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="figma">
<title>Common HTTP errors in the Figma API • figma</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Common HTTP errors in the Figma API">
<meta property="og:description" content="figma">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">figma</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/figma.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/http-errors.html">Common HTTP errors in the Figma API</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pedropark99/figma/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Common HTTP errors in the Figma API</h1>
                        <h4 data-toc-skip class="author">Pedro Duarte
Faria</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pedropark99/figma/blob/HEAD/vignettes/http-errors.Rmd" class="external-link"><code>vignettes/http-errors.Rmd</code></a></small>
      <div class="d-none name"><code>http-errors.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>To get the data of your Figma file, the functions from package make a
HTTP request to the Figma API. But this request can fail for a number of
reasons, and if this does happen, is called to raise an error and report
to the user, what kind of error message the Figma API returned.</p>
<p>A HTTP error means that the server could not fulfill the HTTP request
you made. In the context of the <code>figma</code> package, we usually
request for the data of a specific Figma file to the servers of the
Figma platform, and if a HTTP error occurs, this means that servers of
Figma could not deliver the data of this Figma file to you.</p>
<p>Every successful HTTP request occurs when the server respond with a
HTTP status code equal to 200. So, every HTTP request that we make to
the Figma servers that have a HTTP status code different than 200 is a
HTTP error.</p>
</div>
<div class="section level2">
<h2 id="most-common-http-errors">Most common HTTP errors<a class="anchor" aria-label="anchor" href="#most-common-http-errors"></a>
</h2>
<p>The most common HTTP errors returned by the Figma API are status
codes 400, 404 and 403. The status code 400 is usually a signal of a
internal bug in the <code>figma</code> package, and you should (if
possible) report it to the authors by <a href="https://github.com/pedropark99/figma/issues" class="external-link">registering an issue
in the official repository of the package</a>.</p>
<p>In the other hand, status codes 404 and 403 are usually result of an
user mistake in the key variables they provided to the functions of
package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pedropark99/figma" class="external-link">figma</a></span><span class="op">)</span></code></pre></div>
<div class="section level3">
<h3 id="wrong-node-id-in-figmaget_figma_page-results-in-status-code-400">Wrong node ID in <code>figma::get_figma_page()</code> results in
status code 400<a class="anchor" aria-label="anchor" href="#wrong-node-id-in-figmaget_figma_page-results-in-status-code-400"></a>
</h3>
<p>When you use <code><a href="../reference/get_figma_page.html">figma::get_figma_page()</a></code>, and it returns an
HTTP error with status code 400, is possible that this error was caused
by a mistake in the node ID that you provided to the function.</p>
<p>In other words, if the Figma API returns the status code 400 with
<code><a href="../reference/get_figma_page.html">figma::get_figma_page()</a></code>, there is a chance that you
provided a wrong or invalid node ID to the API. As an example, the code
below uses a clearly wrong node ID, but a valid personal access token
and a valid file key.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">node_id</span> <span class="op">&lt;-</span> <span class="st">"wrongID"</span>
<span class="va">file_key</span> <span class="op">&lt;-</span> <span class="st">"hch8YlkIrYbU3raDzjPvCz"</span>
<span class="va">token</span> <span class="op">&lt;-</span> <span class="st">"My valid personal access token... "</span>
<span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_figma_page.html">get_figma_page</a></span><span class="op">(</span>
  <span class="va">file_key</span>, <span class="va">token</span>, <span class="va">node_id</span>
<span class="op">)</span></code></pre></div>
<pre><code>Error in `get_figma_page()`:
! HTTP Error:

• * URL used in the request: https://api.figma.com/v1/files/hch8YlkIrYbU3raDzjPvCz/nodes?ids=wrong
• * Status code returned by the API: 400
• * Error message returned by the API: ID wrongID is not a valid node_id
• * Headers returned by the API:
List of 3
 $ status : int 400
 $ version: chr "HTTP/2"
 $ headers:List of 13
  ..$ content-type                : chr "application/json; charset=utf-8"
  ..$ content-length              : chr "54"
  ..$ date                        : chr "Sun, 30 Oct 2022 23:10:49 GMT"
  ..$ access-control-allow-origin : chr "*"
  ..$ access-control-allow-headers: chr "Content-Type, X-Figma-Token, Authorization"
  ..$ cache-control               : chr "no-cache, no-store"
  ..$ vary                        : chr "X-Figma-Token,Authorization"
  ..$ x-cache                     : chr "Error from cloudfront"
  ..$ via                         : chr "1.1 a5f39a4680587f7042bdbc4ff6cd417c.cloudfront.net (CloudFront)"
  ..$ x-amz-cf-pop                : chr "GRU3-P1"
  ..$ alt-svc                     : chr "h3=\":443\"; ma=86400"
  ..$ x-amz-cf-id                 : chr "74-bxpmIzbo3clyliImc4IZCaVtxgW-VCFlMN9Na8Ixva1caM8JENw=="
  ..$ strict-transport-security   : chr "max-age=31536000; includeSubDomains; preload"
  ..- attr(*, "class")= chr [1:2] "insensitive" "list"
Run `rlang::last_error()` to see where the error occurred.</code></pre>
</div>
<div class="section level3">
<h3 id="file-not-found">404: File not found<a class="anchor" aria-label="anchor" href="#file-not-found"></a>
</h3>
<p>When the Figma API returns a status code equal to 404, it means that
the servers of Figma could not find the file you referred through the
file key (or file ID) that you provided. In other words, you probably
provided an incorrect file key (or file ID) to ’s function.</p>
<p>In the example below, I give a valid personal access token, but a
very incorrect file key (or file ID). As a result, the Figma servers
respond to the HTTP request with a HTTP status code equal to 404,
indicating that they could not find a Figma file identified by the key
:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">file_key</span> <span class="op">&lt;-</span> <span class="st">"This key does not exist"</span>
<span class="va">token</span> <span class="op">&lt;-</span> <span class="st">"A valid personal token ..."</span>

<span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">figma</span><span class="fu">::</span><span class="fu"><a href="../reference/get_figma_file.html">get_figma_file</a></span><span class="op">(</span>
  <span class="va">file_key</span>, <span class="va">token</span>
<span class="op">)</span></code></pre></div>
<pre><code>Error in `figma::get_figma_file()`:
! HTTP Error:

* URL used in the request: https://api.figma.com/v1/files/This key does not exist
* Status code returned by the API: 404
* Error message returned by the API: Not found
* Headers returned by the API:
List of 3
 $ status : int 404
 $ version: chr "HTTP/2"
 $ headers:List of 13
  ..$ content-type                : chr "application/json; charset=utf-8"
  ..$ content-length              : chr "32"
  ..$ date                        : chr "Sun, 30 Oct 2022 01:36:12 GMT"
  ..$ access-control-allow-origin : chr "*"
  ..$ access-control-allow-headers: chr "Content-Type, X-Figma-Token, Authorization"
  ..$ cache-control               : chr "no-cache, no-store"
  ..$ vary                        : chr "X-Figma-Token,Authorization"
  ..$ x-cache                     : chr "Error from cloudfront"
  ..$ via                         : chr "1.1 1854e234bfccfb7a387b67a7feff26d2.cloudfront.net (CloudFront)"
  ..$ x-amz-cf-pop                : chr "GRU3-P1"
  ..$ alt-svc                     : chr "h3=\":443\"; ma=86400"
  ..$ x-amz-cf-id                 : chr "HE9e153j-uftva_tydKpb6kibQM5Kcw62URWoxsC4zoYSSmNnX-VOA=="
  ..$ strict-transport-security   : chr "max-age=31536000; includeSubDomains; preload"
  ..- attr(*, "class")= chr [1:2] "insensitive" "list"
Run `rlang::last_error()` to see where the error occurred.</code></pre>
</div>
<div class="section level3">
<h3 id="invalid-token">403: Invalid token<a class="anchor" aria-label="anchor" href="#invalid-token"></a>
</h3>
<p>When the Figma API returns a status code equal to 403, it means that
you provided an invalid personal token. This means that you probably
forgot to correctly set your personal token, or maybe, you
unintentionally forgot one character in the token.</p>
<p>In the example below, I use a valid file key, but, a very incorrect
personal access token. When I deliver these key variables to
<code><a href="../reference/get_figma_file.html">figma::get_figma_file()</a></code>, it makes the HTTP request to the
Figma API with this incorrect token, and the Figma servers respond to
this request with a HTTP error equal to 403.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">file_key</span> <span class="op">&lt;-</span> <span class="st">"hch8YlkIrYbU3raDzjPvCz"</span>
<span class="va">token</span> <span class="op">&lt;-</span> <span class="st">"This is an incorrect token"</span>

<span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">figma</span><span class="fu">::</span><span class="fu"><a href="../reference/get_figma_file.html">get_figma_file</a></span><span class="op">(</span>
  <span class="va">file_key</span>, <span class="va">token</span>
<span class="op">)</span></code></pre></div>
<pre><code>Error in `figma::get_figma_file()`:
! HTTP Error:

* URL used in the request: https://api.figma.com/v1/files/hch8YlkIrYbU3raDzjPvCz
* Status code returned by the API: 403
* Error message returned by the API: Invalid token
* Headers returned by the API:
List of 3
 $ status : int 403
 $ version: chr "HTTP/2"
 $ headers:List of 13
  ..$ content-type                : chr "application/json; charset=utf-8"
  ..$ content-length              : chr "36"
  ..$ date                        : chr "Sun, 30 Oct 2022 01:32:20 GMT"
  ..$ access-control-allow-origin : chr "*"
  ..$ access-control-allow-headers: chr "Content-Type, X-Figma-Token, Authorization"
  ..$ cache-control               : chr "no-cache, no-store"
  ..$ vary                        : chr "X-Figma-Token,Authorization"
  ..$ x-cache                     : chr "Error from cloudfront"
  ..$ via                         : chr "1.1 f88bd4c15622473fc18eef7d15f4b8d4.cloudfront.net (CloudFront)"
  ..$ x-amz-cf-pop                : chr "GRU3-P1"
  ..$ alt-svc                     : chr "h3=\":443\"; ma=86400"
  ..$ x-amz-cf-id                 : chr "CClnH5QCZF1wC31us3POW1TWxoODMcriBq0n29_P-y6Q2KYWa6Zw8A=="
  ..$ strict-transport-security   : chr "max-age=31536000; includeSubDomains; preload"
  ..- attr(*, "class")= chr [1:2] "insensitive" "list"
Run `rlang::last_error()` to see where the error occurred.</code></pre>
</div>
</div>
<div class="section level2">
<h2 id="other-possible-http-errors">Other possible HTTP errors<a class="anchor" aria-label="anchor" href="#other-possible-http-errors"></a>
</h2>
<p>You can read the section of “Errors” in the <a href="https://www.figma.com/developers/api#errors" class="external-link">official Figma API
documentation</a> if you want to know more about other kinds of HTTP
errors that can be returned by the API.</p>
<p>On the date of writing of this document, the official documentation
describes two more possible HTTP errors, which are HTTP status codes 429
and 500. The status code 429 means “rate limit” in the server, and if
this error occurs, you do not have much choice than trying the request
again in a few minutes. But if you get the status code 500 instead, this
usually occurs for very large image render requests, which may time out
the Figma server.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Pedro Faria.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
