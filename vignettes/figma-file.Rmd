---
title: "Get your Figma file into R"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Get your Figma file into R}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```


## Introduction

You might have some Figma files that you want to bring into R, to analyse, or, use the visual attributes
of the objects from this file to compose a layout that you want to use in a RMarkdown/Quarto file.

The `figma` package allows you to that. It uses the Figma API to bring all of the data from your Figma file into R.
It does this, by sending a HTTP request to the Figma API to collect all of the data of your Figma file, and them,
it parses this data into a R native object, so you can easily use it in your R process.

```{r setup, eval = FALSE}
library(figma)
```

But in order to use the Figma API, you need to collect two key informations about your file and your credentials. 
They are:

- `file_key`: The ID (or the "key") that identifies your Figma file;
- `token`: Your personal access token from the Figma platform;

Lets talk about these informations;

## Is always nice to read the official Figma API documentation

Much of the information described in this vignette comes from the official Figma API documentation, and
is always interesting to read from the source to learn more about a specific subject. I will give you
direct links to specific parts of the documentation throughout this vignette, but if you want to read
the complete documentation, you can access [this link](https://www.figma.com/developers/api).

## Findind the key (or ID) of your Figma file

The file key (or the file key), is a random text that identifies your Figma
file. The Figma API uses this key to identify which specific Figma file you
are requesting for.

You can find the key (or ID) of your Figma file by looking at the URL in your web browser, when you access your Figma file
at the Figma platform. As an example, lets use this Figma file entitled `Untitled` (I will not make a joke on that 
`r emoji::emoji("sweat_smile")`):

```{r, echo = FALSE, fig.cap = "An example of Figma file"}
knitr::include_graphics("example-figma-file.png")
```

If we look at the top of my web browser, we have the following URL:

`https://www.figma.com/file/hch8YlkIrYbU3raDzjPvCz/Untitled?node-id=0%3A1`

The key (or the ID) of this file is `"hch8YlkIrYbU3raDzjPvCz"`. This means
that the URL of every Figma file is composed of this sctructure. So in
order to use the functions from the `figma` package, you should always
collect this `:file_key` portion of the URL, to get the key to your
file.

`https://www.figma.com/file/:file_key/:file_title?:node_id`


## Get your personal access token

If you do not have a personal access token


# The structure of a Figma file

A Figma file is represented as a tree of nodes. is composed of a set of canvas (or pages), and each canvas contains a set of multiple objects. So, the canvas is the visual space where you draw, and, each object represents a layer, or, a visual element that you add to this space.

Each object that you add can be of a different type (like TEXT, RECTANGLE, ARROW, etc.). But each canvas is always
